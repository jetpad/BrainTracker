<div ng-controller="ReactionTimeCtrl">
  <div class="reaction-session" ng-class="'view-' + test.getView()">
    <div ng-switch on="test.getView()" >

      <h4 class="prompt">
        <span class="number-big" ng-class="test.getNumberClass(2)" hm-touch="test.clickedNumber('2')" hm-tap="">2</span>
        <span class="number-big" ng-class="test.getNumberClass(3)" hm-touch="test.clickedNumber('3')" hm-tap="">3</span>
        <span class="number-big" ng-class="test.getNumberClass(4)" hm-touch="test.clickedNumber('4')" hm-tap="">4</span>
        <span class="number-big" ng-class="test.getNumberClass(5)" hm-touch="test.clickedNumber('5')" hm-tap="">5</span>
        <span class="number-big" ng-class="test.getNumberClass(6)" hm-touch="test.clickedNumber('6')" hm-tap="">6</span>
        <span class="number-big" ng-class="test.getNumberClass(7)" hm-touch="test.clickedNumber('7')" hm-tap="">7</span>
        <span class="number-big" ng-class="test.getNumberClass(8)" hm-touch="test.clickedNumber('8')" hm-tap="">8</span>
      </h4>

      <div ng-switch-when="splash" ng-shortcut="'5'" ng-shortcut-action="test.clickedNumber('0')">
        <h3>
          <div>&nbsp;</div>
        </h3>
        <h3>
          <div>Press <b>5</b> to start.</div>
          <div>When it changes, type the number as quickly as possible. </div>
        </h3>
      </div>

      <div ng-switch-when="waiting">
      <h3>
          <div>&nbsp;</div>
        </h3>
        <h3 >
          <div>wait...</div>
          <div>&nbsp;</div>
        </h3>
        </div>

      <div ng-switch-when="go" ng-shortcut="'1|2|3|4|5|6|7|8|9'" ng-shortcut-action="test.clickedNumber()"> 
        <h3>
          <div>&nbsp;</div>      
        </h3>
        <h3>
          <div>Go!</div>
          <div>&nbsp;</div>
        </h3>
      </div>

      <div ng-switch-when="result" ng-shortcut="'5'" ng-shortcut-action="test.clickedNumber()">
        <h3>
          <div>{{test.currentTrial.latency | number:0}} ms</div>
        </h3>
        <h3>
          <div>press <b>5</b> to go again</div>
          <div>&nbsp;</div>
        </h3>
      </div>

      <div ng-switch-when="too-fast" ng-shortcut="'5'" ng-shortcut-action="test.clickedNumber()">
        <h3>
          <div>Too soon!</div>
         </h3>
        <h3>
          <div>press <b>5</b> to start correction trial</div>
          <div>&nbsp;</div>
        </h3>
      </div>        

      <div ng-switch-when="too-slow" ng-shortcut="'5'" ng-shortcut-action="test.clickedNumber()">
        <h3>
          <div>Too slow!</div>
        </h3>
        <h3>
          <div>press <b>5</b> to start correction trial</div>
          <div>&nbsp;</div>
        </h3>
      </div>

      <div ng-switch-when="wrong-number" ng-shortcut="'5'" ng-shortcut-action="test.clickedNumber()">
        <h3>
          <div>{{test.currentTrial.latency | number:0}} ms</div>
        </h3>
        <h3>
          <div>wrong number!</div>
          <div>press <b>5</b> to start correction trial</div>
        </h3>
      </div>

      <div ng-switch-when="session-complete" ng-shortcut="'5'" ng-shortcut-action="test.clickedNumber()">
        <h3>
          <div>session completed</div>
        </h3>
        <h3>
          <div>Your average latency was {{test.getAverage() | number:0}} ms</div>
          <div>press <b>5</b> to save the session</div>
        </h3>
      </div>

      <div class="progress-bar-container">
        <progressbar class="session-progress-bar"  animate="false" 
       value="test.getValidTrials()" max="test.getMaxTrials()" type="success"><div>{{test.getValidTrials()}} of {{test.getMaxTrials()}}</div></progressbar>
      </div>

      <div class='wrapper text-center'>
        <div class="btn-group">
          <button type="button" class="btn btn-default" ng-shortcut="'c'"  
                  ng-shortcut-action="test.cancelLastTrial()" ng-click="test.cancelLastTrial()"><u>C</u>ancel Last Trial</button>
          <button type="button" class="btn btn-default" ng-shortcut="'e'" 
                  ng-shortcut-action="test.endSession()" ng-click="test.endSession()"><u>E</u>nd Session</button>
                  <div>{{test.message}}</div>
        </div>
        <br/>&nbsp;<br/>&nbsp;<br/>
      </div>       
    </div>
  </div>
</div>

